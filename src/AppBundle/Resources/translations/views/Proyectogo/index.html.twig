{% extends '::baseGo.html.twig' %}
{% block body %}
    <ol class="breadcrumb pull-right">
        <li>
            <a href="{{ path('homepage') }}"><span class="glyphicon glyphicon-home" aria-hidden="true"></span> Inicio</a>
        </li>
        <li class="active"><span class="glyphicon glyphicon-users"></span>{{ singular }}</li>
    </ol>

    <h1 class="page-header">
        <span class="text-muted font-weight-light">
            <i class="page-header-icon ion-ios-keypad"></i>
            Administraci√≥n / {{ plural }}
        </span>
    </h1>
    <div id="results">
        {# Results here #}
    </div>
{% endblock %}
{% block javascripts %}
    <script src="{{ asset('bundles/app/assets/appjs/bootbox.min.js') }}"></script>
    <script src="{{ asset('bundles/app/assets/appjs/devcrud.js') }}"></script>

    <script>
        $(document).ready(function() {

            var options = {
                _reload:                "{{ path(routes.results) }}",
                _show:                  "{{ path(routes.show, { 'id': 'idElemento' }) }}",
                _new:                   "{{ path(routes.new) }}",
                _edit:                  "{{ path(routes.edit, { 'id': 'idElemento' }) }}",
                _enabled:               "{{ path(routes.enabled, { 'id': 'idElemento' }) }}",
                hasDatatable:  true,

                entityName:    "{{ singular }}"
            };
            initializeCRUD(options);
        });


 function loadTree(id){
            loading(true);

            var path = "{{ path('app_proyectogo_treeview',{ 'id': 'idElemento' }) }}";
            path = path.replace('idElemento', id);

            $.ajax({
                type: 'POST',
                async: true,
                url: path,
                success: function(results) {
                    console.log('llego a result');
                    loading(false);
                    $('#results').html('').html(results);
                },
                error: function(e){
                    console.log(e);
                }
            });
        }

    </script>
{% endblock %}
